!function(t,e){for(var o,l=t?"touchstart":"mousedown",n=t?"touchmove":"mousemove",r=t?"touchend":"mouseup",c={SCROLL:"scroll",SCROLLSTOP:"scrollstop",BOUNCE:"scrollbounce",BOUNCEEND:"scrollbouncestop"},s={criticalSpeed:.06,a:.002,delay:16},i={direction:"y"},a=function(t){var e={};return e=t.changedTouches?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY}},u=function(t,e,o,l){var n=t.mscrollJam,r="x"!==o,s=r?t.scrollTop:t.scrollLeft,i=r?"Height":"Width",a=function(e){return(n=t.mscrollJam)||(e?(t.__footBounce||(t.__footBounce=t.children[t.children.length-1],"bounce"!=t.__footBounce.tagName.toLowerCase()&&(t.__footBounce=document.createElement("bounce"),t.appendChild(t.__footBounce))),t.mscrollJam=n=t.__footBounce):(t.__headBounce||(t.__headBounce=t.children[0]),t.mscrollJam=n=t.__headBounce),r?(n.style.width="100%",n.style.height=0):(n.style.width=0,n.style.height="100%"),n.setAttribute("data-type",r?"y":"x"),n.className="__mscroll__jam"),n},u=function(e){var o=e/3,s=n["client"+i],a=r?100:20;l&&(o=Math.max(o,s)),0>=o||l&&(Math.abs(s-o)<1||o>=a/2)?f(t):(n.style[i.toLowerCase()]=Math.min(o,a)+"px",d.call(t,c.BOUNCE,{scrollTop:self.scrollTop,scrollLeft:self.scrollLeft,deltaY:r?o:0,deltaX:r?0:o}))},e=e||0;return 0>=s+e?(a(0),u(-e)):s+e>=t["scroll"+i]-t["client"+i]?(a(1),r?t.scrollTop=s+e:t.scrollLeft=s+e,u(e)):n&&(t.removeChild(n),t.mscrollJam=null),t.mscrollJam},f=(function(t){var e=t.mscrollJam;if(e&&!e._removing){e._removing=!0;var o="webkitTransition"in e.style,l=o?"webkitTransition":"transition",n="x"==e.getAttribute("data-type")?"width":"height";e.style[l]=n+" .2s",e.style[n]=0,e.addEventListener(o?"webkitTransitionEnd":"transitionend",function(){e.style[l]="",t.mscrollJam=null,e._removing=void 0,d.call(t,c.BOUNCEEND,{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})},!1)}}),d=function(t,e){var o=new Event(t);o.data=e,this.dispatchEvent(o),"function"==typeof this["on"+t]&&this["on"+t].call(this,o)},h=function(t){if(t.__tapmask)return t;var e,o=document.createElement("button");return o.style.borderWidth=0,o.style.backgroundColor="transparent",o.style.width=t.clientWidth+"px",o.style.height=t.clientHeight+"px",o.style.position="absolute",o.style.zIndex=10,t.insertBefore(o,t.firstChild),t.__tapmask=o,e=t.offsetParent,console.log(e,e.offsetTop,t.offsetTop,t.offsetHeight),o.style.top=t.offsetTop-e.offsetTop+"px",o.style.left=t.offsetLeft-e.offsetLeft+"px",t},p=function(t){return t.__tapmask&&(t.removeChild(t.__tapmask),delete t.__tapmask),t},m=function(t){var e={bounce:"bounce"==t.children[0].tagName.toLowerCase()},o=window.getComputedStyle(t,null),l=o.getPropertyValue("overflow-x"),n=o.getPropertyValue("overflow-y");return"auto"==n?e.direction="y":"auto"==l&&(e.direction="x"),e},v=({touchScroll:function(){var t,e,o,s=!1,h={},p=this,v=m(p);for(var _ in i)_ in v||(v[_]=i[_]);return o="x"!==v.direction,p.__mscroll_config=v,p.addEventListener(l,function(o){"function"==typeof p.scrollStop&&p.scrollStop(),h=a(o),t=(new Date).getTime(),s=!0,e=0},!1),document.addEventListener(r,function(t){s&&(s=!1,p.speedTo(e,v.direction,v.bounce),t.preventDefault(),f(p))},!1),document.addEventListener(n,function(l){if(s){l.preventDefault();var n,r=a(l),i=h.y-r.y,f=h.x-r.x,m=(new Date).getTime()-t,_=Math.abs(f)-Math.abs(i),y=!0;if(_>0){if("y"==v.direction)return t=(new Date).getTime(),h=r,void 0}else if(0>_&&"x"==v.direction)return t=(new Date).getTime(),h=r,void 0;if(v.bounce&&u(p,o?i:f,o?"y":"x"))return;o?(n=p.scrollTop,p.scrollTop+=i,e=i/m,y=n!=p.scrollTop):(n=p.scrollTop,p.scrollLeft+=f,e=f/m,y=n!=p.scrollLeft),y&&d.call(p,c.SCROLL,{scrollTop:p.scrollTop,scrollLeft:p.scrollLeft,deltaY:i,deltaX:f}),t=(new Date).getTime(),h=r}},!1),this},speedTo:function(t,e,o){var l=s.criticalSpeed,n=this,r="x"!==e,i=r?"scrollTop":"scrollLeft",a=s.a,m=0>t,a=m?-a:a,v=t,_=s.delay,t=Math.max(-3,Math.min(3,t)),y=Math.pow(t,2)/a/2;if(!(Math.abs(y)<.5)){if(h(n),n.scrollStop=function(){p(n),w&&clearInterval(w),o&&f(n),d.call(n,c.SCROLLSTOP),n.scrollStop=null},t&&Math.abs(t)>l){var T,L=n[i],g=t*_,w=setInterval(function(){t-=_*a,g+=t*_;var l=n[i];n[i]=g+L,T&&o||d.call(n,c.SCROLL,{scrollTop:n.scrollTop,scrollLeft:n.scrollLeft,deltaY:r?g:0,deltaX:r?0:g}),0>=v*t?n.scrollStop&&n.scrollStop.call(n):l==n[i]&&(!o||(T=u(n,g+L-l,e,!0))&&T._removing)&&n.scrollStop&&n.scrollStop.call(n)},_);n[i]=g+L}else n.scrollStop&&n.scrollStop.call(n,{});return this}},scrollTo:function(t,e){return void 0!==t&&(this.scrollLeft=t),void 0!==e&&(this.scrollTop=e),this}}),_=0;o=e[_];_++){for(var y in v)o[y]=v[y];o.touchScroll&&o.touchScroll()}}("ontouchend"in document,document.getElementsByTagName("scrollview"));